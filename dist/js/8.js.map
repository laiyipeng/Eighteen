{"version":3,"sources":["webpack:///./src/pages/SearchUser.vue?062e","webpack:///./src/pages/SearchUser.vue","webpack:///./src/pages/SearchUser.vue?c544"],"names":["mounted","$nextTick","searchType","parseInt","$route","params","$store","dispatch","data","searchText","searchList","errMsg","firstEntry","watch","searchResult","val","oldVal","length","computed","result","state","searchedUsers","map","item","nick","account","link","avatar","defaultUserIcon","methods","searchUser","$vux","alert","show","title","userUID","accounts"],"mappings":";;;;;;;;;;AAAA;AACA;AACA;AACA;AACA,oRAAmG;AACnG;AACA;AACA;AACA;AACA;AACA;AACA,+EAA+E,iDAAiD,IAAI;AACpI,mCAAmC;;AAEnC;AACA,YAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,CAAC;;AAED;;;;;;;;;;;;;;;;;;ACgBA;;;;;;kBAEe;AACbA,SADa,qBACF;AAAA;;AACT,SAAKC,SAAL,CAAe,YAAM;AACnB,YAAKC,UAAL,GAAkBC,SAAS,MAAKC,MAAL,CAAYC,MAAZ,CAAmBH,UAA5B,CAAlB;AACA,YAAKI,MAAL,CAAYC,QAAZ,CAAqB,mBAArB;AACD,KAHD;AAID,GANY;AAObC,MAPa,kBAOL;AACN,WAAO;AACLN,kBAAY,CADP;AAELO,kBAAY,EAFP;AAGLC,kBAAY,EAHP;AAILC,cAAQ,EAJH;;AAMLC,kBAAY;AANP,KAAP;AAQD,GAhBY;;AAiBbC,SAAO;AACLC,gBADK,wBACSC,GADT,EACcC,MADd,EACsB;AACzB,UAAI,KAAKd,UAAL,KAAoB,CAAxB,EAA2B;AACzB,aAAKS,MAAL,GAAc,YAAd;AACA;AACD;AACD,UAAKI,IAAIE,MAAJ,KAAe,CAAhB,IAAuB,CAAC,KAAKL,UAAjC,EAA8C;AAC5C,aAAKD,MAAL,GAAc,KAAd;AACD,OAFD,MAEO;AACL,aAAKA,MAAL,GAAc,EAAd;AACD;AACD,WAAKD,UAAL,GAAkBK,GAAlB;AACD;AAZI,GAjBM;AA+BbG,YAAU;AACRJ,gBADQ,0BACQ;AACd,UAAIK,SAAS,EAAb;AACA,UAAI,KAAKjB,UAAL,KAAoB,CAAxB,EAA2B;AACzB,eAAOiB,MAAP;AAED,OAHD,MAGO,IAAI,KAAKjB,UAAL,KAAoB,CAAxB,EAA2B;AAChCiB,iBAAS,KAAKb,MAAL,CAAYc,KAAZ,CAAkBC,aAAlB,CAAgCC,GAAhC,CAAoC,gBAAQ;AACnDC,eAAKC,IAAL,GAAYD,KAAKC,IAAL,IAAaD,KAAKE,OAA9B;AACAF,eAAKG,IAAL,kBAAyBH,KAAKE,OAA9B;AACAF,eAAKI,MAAL,GAAcJ,KAAKI,MAAL,IAAe,kBAAOC,eAApC;AACA,iBAAOL,IAAP;AACD,SALQ,CAAT;AAMD;AACD,aAAOJ,MAAP;AACD;AAfO,GA/BG;AAgDbU,WAAS;AACPC,cADO,wBACO;AACZ,WAAKlB,UAAL,GAAkB,KAAlB;AACA,UAAI,KAAKV,UAAL,KAAoB,CAAxB,EAA2B;AACzB,aAAK6B,IAAL,CAAUC,KAAV,CAAgBC,IAAhB,CAAqB;AACnBC,iBAAO;AADY,SAArB;AAGD,OAJD,MAIO,IAAI,KAAKhC,UAAL,KAAoB,CAAxB,EAA2B;AAChC,YAAI,KAAKO,UAAL,KAAoB,KAAKH,MAAL,CAAYc,KAAZ,CAAkBe,OAA1C,EAAmD;AACjD,eAAKzB,UAAL,GAAkB,EAAlB;AACA,eAAKC,MAAL,GAAc,YAAd;AACD,SAHD,MAGO;AACL,eAAKL,MAAL,CAAYC,QAAZ,CAAqB,aAArB,EAAoC;AAClC6B,sBAAU,CAAC,KAAK3B,UAAN;AADwB,WAApC;AAGD;AACF;AACF;AAjBM;AAhDI,C;;;;;;;;;;;;;AC7Cf,gBAAgB,mBAAmB,aAAa,0BAA0B;AAC1E;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,KAAK;AACL,GAAG;AACH;AACA,GAAG;AACH,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,C","file":"8.js","sourcesContent":["var Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vux-loader/src/script-loader.js!../../node_modules/vue-loader/lib/selector?type=script&index=0!./SearchUser.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3df14b96\\\"}!../../node_modules/vux-loader/src/before-template-compiler-loader.js!../../node_modules/vux-loader/src/template-loader.js!../../node_modules/vue-loader/lib/selector?type=template&index=0!./SearchUser.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\nComponent.options.__file = \"/root/NIM_Web_Demo_H5/src/pages/SearchUser.vue\"\nif (Component.esModule && Object.keys(Component.esModule).some(function (key) {return key !== \"default\" && key !== \"__esModule\"})) {console.error(\"named exports are not supported in *.vue files.\")}\nif (Component.options.functional) {console.error(\"[vue-loader] SearchUser.vue: functional components are not supported with templates, they should use render functions.\")}\n\n/* hot reload */\nif (module.hot) {(function () {\n  var hotAPI = require(\"vue-hot-reload-api\")\n  hotAPI.install(require(\"vue\"), false)\n  if (!hotAPI.compatible) return\n  module.hot.accept()\n  if (!module.hot.data) {\n    hotAPI.createRecord(\"data-v-3df14b96\", Component.options)\n  } else {\n    hotAPI.reload(\"data-v-3df14b96\", Component.options)\n  }\n})()}\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/SearchUser.vue\n// module id = 289\n// module chunks = 8","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport config from '../configs'\n\nexport default {\n  mounted () {\n    this.$nextTick(() => {\n      this.searchType = parseInt(this.$route.params.searchType)\n      this.$store.dispatch('resetSearchResult')\n    })\n  },\n  data () {\n    return {\n      searchType: 0, // 用户 0 群 1\n      searchText: '',\n      searchList: [],\n      errMsg: '',\n      // 首次加载标志，因为mount和watch会有时序问题，首次加载不显示errMsg\n      firstEntry: true\n    }\n  },\n  watch: {\n    searchResult (val, oldVal) {\n      if (this.searchType === 1) {\n        this.errMsg = '群功能DEMO待开发'\n        return\n      }\n      if ((val.length === 0) && (!this.firstEntry)) {\n        this.errMsg = '无记录'\n      } else {\n        this.errMsg = ''\n      }\n      this.searchList = val\n    }\n  },\n  computed: {\n    searchResult () {\n      let result = []\n      if (this.searchType === 1) {\n        return result\n        // result = this.$store.state.searchedTeams\n      } else if (this.searchType === 0) {\n        result = this.$store.state.searchedUsers.map(item => {\n          item.nick = item.nick || item.account\n          item.link = `/namecard/${item.account}`\n          item.avatar = item.avatar || config.defaultUserIcon\n          return item\n        })\n      }\n      return result\n    }\n  },\n  methods: {\n    searchUser () {\n      this.firstEntry = false\n      if (this.searchType === 1) {\n        this.$vux.alert.show({\n          title: '群功能DEMO待开发'\n        })\n      } else if (this.searchType === 0) {\n        if (this.searchText === this.$store.state.userUID) {\n          this.searchList = []\n          this.errMsg = '别看了，就是你自己！'\n        } else {\n          this.$store.dispatch('searchUsers', {\n            accounts: [this.searchText]\n          })\n        }\n      }\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/SearchUser.vue","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"g-inherit m-article p-search-user\"\n  }, [_c('x-header', {\n    staticClass: \"m-tab\",\n    attrs: {\n      \"left-options\": {\n        backText: ' '\n      }\n    }\n  }, [_c('button-tab', {\n    staticClass: \"m-tab-top\",\n    model: {\n      value: (_vm.searchType),\n      callback: function($$v) {\n        _vm.searchType = $$v\n      },\n      expression: \"searchType\"\n    }\n  }, [_c('button-tab-item', {\n    staticClass: \"u-tab-top\"\n  }, [_vm._v(\"搜索用户\")]), _vm._v(\" \"), _c('button-tab-item', {\n    staticClass: \"u-tab-top\"\n  }, [_vm._v(\"搜索群\")])], 1), _vm._v(\" \"), _c('a', {\n    slot: \"left\"\n  })], 1), _vm._v(\" \"), _c('group', {\n    staticClass: \"u-search\"\n  }, [_c('search', {\n    staticClass: \"u-ipt-default\",\n    attrs: {\n      \"type\": \"text\",\n      \"required\": false,\n      \"auto-fixed\": false,\n      \"placeholder\": \"请输入搜索内容\"\n    },\n    model: {\n      value: (_vm.searchText),\n      callback: function($$v) {\n        _vm.searchText = $$v\n      },\n      expression: \"searchText\"\n    }\n  }, [_c('span', {\n    slot: \"label\"\n  }, [_vm._v(\"搜索：\")])])], 1), _vm._v(\" \"), _c('div', [_c('x-button', {\n    attrs: {\n      \"type\": \"primary\",\n      \"action-type\": \"button\"\n    },\n    nativeOn: {\n      \"click\": function($event) {\n        _vm.searchUser($event)\n      }\n    }\n  }, [_vm._v(\"搜索\")])], 1), _vm._v(\" \"), _c('group', {\n    staticClass: \"u-card u-list\"\n  }, _vm._l((_vm.searchList), function(user, index) {\n    return _c('cell', {\n      key: user.account,\n      staticClass: \"u-list-item\",\n      attrs: {\n        \"title\": user.nick,\n        \"inline-desc\": user.account,\n        \"userId\": index,\n        \"is-link\": \"\",\n        \"link\": user.link\n      }\n    }, [_c('img', {\n      staticClass: \"icon\",\n      attrs: {\n        \"width\": \"20\",\n        \"src\": user.avatar\n      },\n      slot: \"icon\"\n    })])\n  })), _vm._v(\" \"), _c('div', {\n    staticClass: \"u-card\"\n  }, [_c('h3', [_vm._v(_vm._s(_vm.errMsg))])])], 1)\n},staticRenderFns: []}\nmodule.exports.render._withStripped = true\nif (module.hot) {\n  module.hot.accept()\n  if (module.hot.data) {\n     require(\"vue-hot-reload-api\").rerender(\"data-v-3df14b96\", module.exports)\n  }\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-3df14b96\"}!./~/vux-loader/src/before-template-compiler-loader.js!./~/vux-loader/src/template-loader.js!./~/vue-loader/lib/selector.js?type=template&index=0!./src/pages/SearchUser.vue\n// module id = 376\n// module chunks = 8"],"sourceRoot":""}